---
id: product_faq.md
---

# 产品问题


<!-- TOC -->

- [Milvus 会收费吗？](#milvus-会收费吗)
- [Milvus 支持非 x86 平台吗？](#milvus-支持非-x86-平台吗)
- [Milvus 支持对向量的插入、删除、更改和查询操作吗？](#milvus-支持对向量的插入删除更改和查询操作吗)
- [Milvus 可以处理百亿或千亿级数据吗？](#milvus-可以处理百亿或千亿级数据吗)
- [Milvus 数据存储在哪里？](#milvus-数据存储在哪里)
- [为什么我在 etcd 找不到向量数据？](#为什么我在-sqlite--mysql-找不到向量数据)
- [Milvus 的 Python SDK 有连接池吗？](#milvus-的-python-sdk-有连接池吗)
- [Milvus 是否支持 “边插入边查询” ？](#milvus-是否支持-边插入边查询-)
- [向 Milvus 中导入数据时，应该自己指定 entity ID 还是由 Milvus 自动生成 entity ID？](#向-milvus-中导入数据时应该自己指定-entity-id-还是由-milvus-自动生成-entity-id)
- [Milvus 可以插入重复 ID 的向量吗？](#milvus-可以插入重复-id-的向量吗)
- [Milvus 中自定义 ID 有没有长度限制？](#milvus-中自定义-id-有没有长度限制)
- [Milvus 中单次插入数据有上限吗？](#milvus-中单次插入数据有上限吗)
- [为什么向量距离计算方式是内积时，搜索出来的 `top1` 不是目标向量本身？](#为什么向量距离计算方式是内积时搜索出来的-top1-不是目标向量本身)
- [对集合分区的查询是否会受到集合大小的影响，尤其在集合数据量高达一亿数据量时？](#对集合分区的查询是否会受到集合大小的影响尤其在集合数据量高达一亿数据量时)
- [如果只是搜索集合中的部分分区，整个集合的数据会全部加载到内存吗？](#如果只是搜索集合中的部分分区整个集合的数据会全部加载到内存吗)
- [Milvus 中如何选择向量索引的类型？](#milvus-中如何选择向量索引的类型)
- [Milvus 可以在同一个集合中的同一列数据上建立多个不同索引吗？](#Milvus 可以在同一个集合中的同一列数据上建立多个不同索引吗)
- [Milvus 中支持新增向量后再建索引吗？](#milvus-中支持新增向量后再建索引吗)
- [索引 IVF\_SQ8 和 IVF\_SQ8H 在召回率上有区别吗?](#索引-ivf_sq8-和-ivf_sq8h-在召回率上有区别吗)
- [Milvus 中 FLAT 索引和 IVF_FLAT 索引的原理比较？](#milvus-中-flat-索引和-ivf_flat-索引的原理比较)
- [Milvus 的数据落盘逻辑是怎样的？](#milvus-的数据落盘逻辑是怎样的)
- [什么是归一化？Milvus 中为什么有时候需要归一化？](#什么是归一化milvus-中为什么有时候需要归一化)
- [为什么欧氏距离和内积在计算向量相似度时的结果不一致？](#为什么欧氏距离和内积在计算向量相似度时的结果不一致)
- [Milvus 对集合和分区的总数有限制吗？](#milvus-对集合和分区的总数有限制吗)
- [为什么搜索 `topk` 向量，结果不到 k 条向量？](#为什么搜索-topk-向量结果不到-k-条向量)
- [Milvus 支持的向量维度的最大值是多少？](#milvus-支持的向量维度的最大值是多少)
- [仍有问题没有得到解答？](#仍有问题没有得到解答)

<!-- /TOC -->

#### Milvus 会收费吗？

Milvus 会坚持开源路线，软件本省不会收取任何费用。

项目开源，请遵循 [Apache 2.0 协议](http://www.apache.org/licenses/LICENSE-2.0) 使用。

如果用户不愿意自己搭建 Milvus 分布式平台，我司提供一体化的云平台(云平台的链接)，用于可以按需付费，数据的可靠性有云平台负责管理。

#### Milvus 支持非 x86 平台吗？

目前不支持。

#### Milvus 支持对向量的插入、删除、更改和查询操作吗？

当前只支持插入和查询操作

#### Milvus 可以处理百亿或千亿级数据吗？

Milvus 分布式平台可以满足您的需求。

#### Milvus 数据存储在哪里？

向量数据导入 Milvus 后，将自动存储在 minIO，元数据存储在 etcd。


#### 为什么我在 etcd 找不到向量数据？

etcd 只是存放原始向量数据的元数据。向量和索引存储在 minIO，不存放在 etcd 里。

#### Milvus 的 Python SDK 有连接池吗？

Milvus v0.9.0 及更高版本对应的 Python SDK 有连接池。连接池的默认连接数量没有上限。

#### Milvus 是否支持 “边插入边查询” ？

支持。

#### 向 Milvus 中导入数据时，应该自己指定 entity ID 还是由 Milvus 自动生成 entity ID？

两种方法均可。但是，在一个集合内的向量必须全部使用用户指定的 entity ID 或者全部使用自动生成的 entity ID。

#### Milvus 可以插入重复 ID 的向量吗？

可以，这样在 Milvus 中会存在相同 ID 的多条向量。

#### Milvus 中自定义 ID 有没有长度限制？

ID 类型是非负的 64 位整型。

#### Milvus 中单次插入数据有上限吗？

单次插入数据不能超过 1024MB，这个限制由 grpc 决定。

#### 为什么向量距离计算方式是内积时，搜索出来的 `top1` 不是目标向量本身？

向量距离计算方式用内积时，如果向量未归一化，会出现这样的情况。

#### 对集合分区的查询是否会受到集合大小的影响，尤其在集合数据量高达一亿数据量时？

不会。如果你在搜索时指定了分区，Milvus 只会在相应分区进行搜索。

#### 如果只是搜索集合中的部分分区，整个集合的数据会全部加载到内存吗？

会。当前实现中，所有数据均被加载到内存。

#### Milvus 中如何选择向量索引的类型？

索引需要根据具体场景和需求去选择。详见 [如何选择索引类型](https://milvus.io/cn/blogs/2019-12-03-select-index.md)。

#### Milvus 可以在同一个集合中的同一列数据上建立多个不同索引吗？

可以。Milvus 2.0 可以在一个集合内创建多个不同类型的索引，每个索引必须指定集合内唯一的索引名字，无论这些索引是在同一列上还是不同列上。


#### Milvus 中支持新增向量后再建索引吗？

支持。Milvus 中数据是分 segment 存储的，后续新增向量会存在新的 segment 中。该 segment 达到一定量后会自动触发建立索引，生成一个新的索引文件，不会影响之前已经建立过的索引。


#### 索引 IVF\_SQ8 和 IVF\_SQ8H 在召回率上有区别吗?

对于相同的数据集，IVF\_SQ8 和 IVF\_SQ8H 的召回率一致。

#### Milvus 中 FLAT 索引和 IVF_FLAT 索引的原理比较？

把 FLAT 和 IVF_FLAT 做比较，可以这么估算：

已知 IVF_FLAT 索引是把向量分成 `nlist` 个单元。假设用默认的 `nlist` = 16384，搜索的时候是先用目标向量和这 16384 个中心点计算距离，得到最近的 `nprobe` 个单元，再在单元里计算最近向量。而 FLAT 是每条向量和目标向量计算距离。

所以当总的向量条数约等于 `nlist` 时，两者的计算量相当，性能也差不多。而随着向量条数达到 `nlist` 的 2 倍、3 倍、n 倍之后，IVF_FLAT 的优势就越来越大。

可参阅 [如何选择索引类型](https://milvus.io/cn/blogs/2019-12-03-select-index.md)。

#### Milvus 的数据落盘逻辑是怎样的？

插入是先把数据写到消息队列，`data node` 负责将消息队列中的数据存入持久化存储，如果调用 `flush` 方法，也迫使 `data node` 将当前消息队列的所有数据均写入持久化存储。

#### 什么是归一化？Milvus 中为什么有时候需要归一化？

归一化指的是通过数学变换将向量的模长变为 1 的过程。如需使用点积计算向量相似度，则必须对向量作归一化处理。处理后点积与余弦相似度等价。

可参阅文章 [向量搜索的简明数学基础](https://zhuanlan.zhihu.com/p/88117781)。

#### 为什么欧氏距离和内积在计算向量相似度时的结果不一致？

如果欧氏距离和内积返回不一致的结果，需要检查数据是否已经归一化。如果没有，请先对数据进行归一化。理论上可以证明，对于未归一化的数据，欧氏距离和内积的结果是不一致的。


#### Milvus 对集合和分区的总数有限制吗？

collection 数量没有限制。每个 collection 内的 partition 总数由参数 `master.maxPartitionNum` 决定。

#### 为什么搜索 `topk` 向量，结果不到 k 条向量？

在 Milvus 支持的索引类型中，IVF_FLAT 和 IVF_SQ8 是基于 k-means 空间划分的分单元搜索算法。空间被分为 `nlist` 个单元，导入的向量被分配存储在基于 `nlist` 划分的文件结构中。搜索发生时，只搜索最近似的 `nprobe` 个单元。

如果 `nlist` 和 k 比较大，而 `nprobe` 又足够小，有可能出现 `nprobe` 文件中的所有向量总数小于 k。当搜索 `topk` 向量时，就会出现搜索结果小于 k 条向量的情况。

想要避免这种情况，可以尝试将 `nprobe` 设置为更大值，或者把 `nlist` 和 `k` 设置为更小值。

详见 [索引类型](index.md)。


#### Milvus 支持的向量维度的最大值是多少？
Milvus 最多能够支持 32,768 向量维度。


#### 仍有问题没有得到解答？

如果仍有其他问题，你可以：

- 在 GitHub 上访问 [Milvus](https://github.com/milvus-io/milvus/issues)，提问、分享、交流，帮助其他用户。
- 加入我们的 [Slack 社区](https://join.slack.com/t/milvusio/shared_invite/enQtNzY1OTQ0NDI3NjMzLWNmYmM1NmNjOTQ5MGI5NDhhYmRhMGU5M2NhNzhhMDMzY2MzNDdlYjM5ODQ5MmE3ODFlYzU3YjJkNmVlNDQ2ZTk)，与其他用户讨论交流。

